{{display-error isLoaded=isSaved
                errorMessage=errorMessage
                responseMessage=responseMessage}}

<div class="jumbotron text-center col-xs-10 col-sm-10 col-md-10 col-lg-10 col-xs-offset-1">
  <article class="panel panel-default">
    <div class="form-horizontal">
      <div class="panel-heading">
        <strong>E-mail: {{model.email}}</strong>
      </div>
      <div class="panel-body">
        {{#if canViewUsers}}
          {{#if isAdmin}}
            <div class="row">
              {{#if notMyself}}
                <p><strong>First name: </strong>{{model.firstName}}</p>
                <p><strong>Last name: </strong>{{model.lastName}}</p>
                {{#if model.positions.isManager}}
                  <button class="btn btn-info" {{action 'demote' model}}>Demote to regular user</button>
                {{else}}
                  <button class="btn btn-info" {{action 'promote' model}}>Promote to manager</button>
                {{/if}}
              {{else}}
                <div class="form-group">
                  <label class="col-sm-2 control-label">First name:</label>
                  <div class="col-sm-10">
                    {{input type="text" value=model.firstName class="form-control"}}
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label">Last name:</label>
                  <div class="col-sm-10">
                    {{input type="text" value=model.lastName class="form-control"}}
                  </div>
                </div>
                <div class="row">
                  <button class='btn btn-success' {{action 'saveUser' model}}>Save</button>
                </div>
              {{/if}}
            </div>
            <br/>
            <div class="row">
              {{#link-to 'users.index' tagName='button' class='btn btn-danger'}}Back{{/link-to}}
            </div>
          {{else}}
            <div class="form-group">
              <label class="col-sm-2 control-label">First name:</label>
              <div class="col-sm-10">
                {{input type="text" value=model.firstName class="form-control"}}
              </div>
            </div>
            <div class="form-group">
              <label class="col-sm-2 control-label">Last name:</label>
              <div class="col-sm-10">
                {{input type="text" value=model.lastName class="form-control"}}
              </div>
            </div>
            <div class="row">
              <button class='btn btn-success' {{action 'saveUser' model}}>Save</button>
              {{#link-to 'users.index' tagName='button' class='btn btn-danger'}}Back{{/link-to}}
            </div>
          {{/if}}
        {{else}}
          {{#link-to 'index' tagName='button' class='btn btn-danger'}}Back{{/link-to}}
          <button class='btn btn-success' {{action 'saveUser' model}}>Save</button>
        {{/if}}
      </div>
    </div>
  </article>
</div>
